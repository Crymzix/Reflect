<Page loaded="pageLoaded" xmlns:drawer="nativescript-telerik-ui/sidedrawer" xmlns="http://www.nativescript.org/tns.xsd"
      actionBarHidden="true">
    <drawer:SideDrawer id="sideDrawer">
        <drawer:SideDrawer.drawerTransition>
            <drawer:SlideInOnTopTransition/>
        </drawer:SideDrawer.drawerTransition>
        <drawer:SideDrawer.mainContent>
            <StackLayout>
                <StackLayout>
                    <GridLayout cssClass="action-bar">
                        <GridLayout cssClass="action-wrap" tap="showSlideout" columns="auto" horizontalAlignment="left">
                            <Image stretch="none" cssClass="icon-image" src="res://ic_menu"/>
                        </GridLayout>
                        <Label text="Reflect" cssClass="action-bar-title"/>
                    </GridLayout>
                </StackLayout>

                <!-- Nearby Events View -->
                <StackLayout row="1" visibility="{{ selectedViewIndex === 0 ? 'visible' : 'collapsed'}}">
                    <Label text="Nearby Events" textWrap="true" cssClass="view-title"/>
                    <ListView id="eventsListview" items="{{ nearbyEvents }}" itemTap="listViewItemTap">
                        <ListView.itemTemplate>
                            <StackLayout orientation="horizontal">
                                <Image src="{{ eventItemImage }}" stretch="aspectFill" width="75" height="75" style="padding:10;margin-right:10" />
                                <Label text="{{ eventItemTitle }}" verticalAlignment="center" style="margin-left:10;"/>
                            </StackLayout>
                        </ListView.itemTemplate>
                    </ListView>
                </StackLayout>

                <!-- My Events View -->
                <StackLayout row="1" visibility="{{ selectedViewIndex === 1 ? 'visible' : 'collapsed'}}">
                    <Label text="My Events" textWrap="true" cssClass="view-title"/>
                </StackLayout>

                <!-- Create Event View -->
                <StackLayout row="1" visibility="{{ selectedViewIndex === 2 ? 'visible' : 'collapsed'}}">
                    <Label text="Create Event" textWrap="true" cssClass="view-title"/>
                    <ScrollView>
                        <StackLayout>
                            <Image id="eventCover" src="{{ eventCoverPhoto }}" cssClass="event-photo"
                                   stretch="aspectFill"/>
                            <GridLayout cssClass="upload-photo-wrap" tap="choosePhoto" columns="auto"
                                        horizontalAlignment="left">
                                <Image stretch="none" cssClass="icon-image" src="res://ic_image_add_to_photos"/>
                            </GridLayout>
                            <TextField id="eventTitle" text="{{ title }}" hint="Title" keyboardType="email"
                                       autocorrect="true" cssClass="event-input-field"/>
                            <GridLayout columns="5, *, auto" rows="auto, *" >
                                <Button col="1" text="date" tap="setDate" cssClass="event-date" horizontalAlignment="center"/>
                                <Button col="4" text="time" tap="setTime" cssClass="event-date" horizontalAlignment="center" style="margin-right:30;"/>
                            </GridLayout>
                            <GridLayout columns="5, *, auto" rows="auto, *" >
                                <Label id="eventDateLabel" col="1" textWrap="true" cssClass="event-label" horizontalAlignment="center"/>
                                <Label id="eventTimeLabel" col="4" textWrap="true" cssClass="event-label" horizontalAlignment="center" style="margin-right:30;"/>
                            </GridLayout>
                            <TextField id="eventLocation" text="{{ location }}" hint="Location" keyboardType="email"
                                       autocorrect="false" cssClass="event-input-field"/>
                            <TextField id="eventDescription" height="100" text="{{ description }}" hint="Description"
                                       autocorrect="true" cssClass="event-input-field"/>
                            <GridLayout cssClass="upload-photo-wrap" tap="addEvent" columns="auto"
                                        horizontalAlignment="right" height="75">
                                <Image stretch="none" cssClass="icon-image" src="res://add_event"/>
                            </GridLayout>
                        </StackLayout>
                    </ScrollView>
                </StackLayout>
				
				<!-- Search Events View -->
				<StackLayout visibility="{{ selectedViewIndex === 3 ? 'visible' : 'collapsed'}}">
					<SearchBar  hint="Hashtag" text="{{ hashtagSearch }}" cssClass="search" textFieldBackgroundColor="white" id="hashtagSearch" />
					<SearchBar  hint="Location" text="{{ locationSearch }}" cssClass="search" textFieldBackgroundColor="white" id="locationSearch"/>
					<SearchBar hint="Keywords" text="{{ keywordSearch }}" cssClass="search" textFieldBackgroundColor="white" id="keywordSearch" />
					<Button tap="searchEvents" cssClass="Button" text="Search" />
				</StackLayout>
				
				<!-- Search Results View -->
                <StackLayout row="1" visibility="{{ selectedViewIndex === 4 ? 'visible' : 'collapsed'}}">
                    <Label text="Search Results" textWrap="true" cssClass="view-title"/>
                    <ListView id="eventsListview" items="{{ searchEvents }}" itemTap="listViewItemTap">
                        <ListView.itemTemplate>
                            <StackLayout orientation="horizontal">
                                <Image src="{{ eventItemImage }}" stretch="aspectFill" width="75" height="75" style="padding:10;margin-right:10" />
                                <Label text="{{ eventItemTitle }}" verticalAlignment="center" style="margin-left:10;"/>
                            </StackLayout>
                        </ListView.itemTemplate>
                    </ListView>
                </StackLayout>
				
            </StackLayout>
        </drawer:SideDrawer.mainContent>
        <drawer:SideDrawer.drawerContent>
            <StackLayout cssClass="drawerContent">
                <StackLayout cssClass="headerContent">
                    <Image src="res://logo" stretch="none" horizontalAlignment="center" verticalAlignment="center"/>
                </StackLayout>
                <StackLayout cssClass="drawerMenuContent">
                    <Button tap="selectView" tag="0"
                            cssClass="{{ selectedViewIndex === 0 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="Nearby Events"/>
                    <Button tap="selectView" tag="1"
                            cssClass="{{ selectedViewIndex === 1 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="My Events" visibility="{{ loggedIn ? 'visible' : 'collapsed' }}"/>
                    <Button tap="selectView" tag="2"
                            cssClass="{{ selectedViewIndex === 2 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="Create Event"/>
					<Button tap="selectView" tag="3"
                            cssClass="{{ selectedViewIndex === 3 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="Search Event"/>
					<Button tap="selectView" tag="4"
                            cssClass="{{ selectedViewIndex === 4 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="Search Results"/>
                    <Button tap="switchToLogin" tag="5"
                            cssClass="{{ selectedViewIndex === 5 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="Log In" visibility="{{ loggedIn ? 'collapsed' : 'visible' }}"/>
                    <Button tap="logOut" tag="6"
                            cssClass="{{ selectedViewIndex === 6 ? 'slide-out-btn-selected' : 'slide-out-btn' }}"
                            text="Log Out" visibility="{{ loggedIn ? 'visible' : 'collapsed' }}"/>

                </StackLayout>
            </StackLayout>
        </drawer:SideDrawer.drawerContent>
    </drawer:SideDrawer>
</Page>